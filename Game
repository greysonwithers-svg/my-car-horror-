<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>my car horror</title>
    <style>
        body { background: #000; color: #ff0000; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        #game-window { width: 90%; max-width: 600px; height: 400px; border: 4px solid #440000; position: relative; background: #000; box-shadow: 0 0 20px #500; transition: opacity 0.1s; }
        #dashboard { position: absolute; bottom: 0; width: 100%; height: 120px; background: #111; border-top: 4px solid #440000; display: flex; justify-content: space-around; align-items: center; }
        #clock { position: absolute; top: 10px; right: 20px; font-size: 28px; text-shadow: 0 0 10px #f00; }
        #fuel-bar { width: 120px; height: 15px; border: 2px solid #ff0000; background: #200; }
        #fuel-fill { width: 100%; height: 100%; background: #ff0000; box-shadow: 0 0 10px #f00; }
        .btn { padding: 15px; background: #000; color: #ff0000; border: 2px solid #ff0000; cursor: pointer; font-family: 'Courier New'; font-weight: bold; }
        #hard-mode-btn { display: none; border-color: #fff; color: #fff; box-shadow: 0 0 10px #fff; }
        #display { padding: 40px; text-align: center; font-size: 1.2em; }
        .warning { color: #fff; background: red; animation: blink 0.2s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } }
        #jumpscare { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; justify-content: center; align-items: center; }
    </style>
</head>
<body onload="checkSave()">

    <div id="game-window">
        <div id="clock">12:00 AM</div>
        <div id="display">WELCOME TO THE LOT.<br><br>
            <button class="btn" onclick="startGame(false)">START SHIFT</button>
            <button id="hard-mode-btn" class="btn" onclick="startGame(true)">NIGHTMARE MODE</button>
        </div>
        
        <div id="jumpscare"><h1 style="color:red; font-size: 5em;">BREACH</h1></div>

        <div id="dashboard" style="display:none;">
            <div style="text-align:center">FUEL<div id="fuel-bar"><div id="fuel-fill"></div></div></div>
            <button id="lockBtn" class="btn" onclick="toggleLock()">LOCK</button>
            <button class="btn" onclick="flashLights()">BEAMS</button>
        </div>
    </div>

    <script>
        let fuel, locked, hour, mins, isAttacking, gameActive, isHardMode;
        const lockSnd = new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3');
        const scareSnd = new Audio('https://assets.mixkit.co/active_storage/sfx/951/951-preview.mp3');

        function checkSave() {
            if (localStorage.getItem("nightmareWon") === "true") {
                document.getElementById('hard-mode-btn').style.display = "inline-block";
            }
        }

        function startGame(hard) {
            isHardMode = hard;
            fuel = 100; locked = false; hour = 12; mins = 0; isAttacking = false; gameActive = true;
            document.getElementById('dashboard').style.display = "flex";
            document.getElementById('display').innerHTML = isHardMode ? "GOOD LUCK. YOU'LL NEED IT." : "WATCH THE DOORS.";
            setInterval(gameLoop, 200);
        }

        function gameLoop() {
            if (!gameActive) return;

            // Time Logic
            mins++;
            if (mins >= 60) { mins = 0; hour = (hour == 12) ? 1 : hour + 1; if (hour == 6) win(); }
            document.getElementById('clock').innerText = hour + ":" + (mins < 10 ? "0"+mins : mins) + " AM";

            // Fuel & Flicker Effect
            let consumption = isHardMode ? 0.6 : 0.4;
            fuel -= (locked ? consumption : 0.1);
            document.getElementById('fuel-fill').style.width = fuel + "%";
            
            if (fuel < 15 && Math.random() < 0.3) {
                document.getElementById('game-window').style.opacity = "0.3";
                setTimeout(() => document.getElementById('game-window').style.opacity = "1", 50);
            }

            if (fuel <= 0) die("SYSTEM POWER FAILURE.");

            // Attack Logic
            let chance = isHardMode ? 0.03 : 0.008;
            if (!isAttacking && Math.random() < chance) attack();
        }

        function attack() {
            isAttacking = true;
            document.getElementById('display').innerHTML = "<span class='warning'>!!! LOCK THE DOOR !!!</span>";
            let reactionTime = isHardMode ? 1000 : 2000; // Hard mode gives only 1 second!
            
            setTimeout(() => {
                if (!locked) die("BREACH DETECTED.");
                else { isAttacking = false; document.getElementById('display').innerHTML = "IT LEFT."; }
            }, reactionTime);
        }

        function toggleLock() {
            locked = !locked; lockSnd.play();
            document.getElementById('lockBtn').style.background = locked ? "red" : "black";
            document.getElementById('lockBtn').style.color = locked ? "black" : "red";
        }

        function flashLights() {
            if (fuel < 5) return; fuel -= 5;
            document.getElementById('display').innerHTML = "THE BEAMS REVEAL TEETH.";
            setTimeout(() => { if(!isAttacking) document.getElementById('display').innerHTML = "DARKNESS."; }, 1000);
        }

        function die(msg) {
            gameActive = false; scareSnd.play();
            document.getElementById('jumpscare').style.display = 'flex';
            setTimeout(() => { alert(msg); location.reload(); }, 600);
        }

        function win() {
            gameActive = false;
            localStorage.setItem("nightmareWon", "true");
            alert("6:00 AM. YOU SURVIVED. NIGHTMARE MODE UNLOCKED.");
            location.reload();
        }
    </script>
</body>
</html>
